$(document).ready(function(){$("#nm_prop").live("focus",function(){$(this).autocomplete({minLength:2,source:function(e,t){$.ajax({url:baseurl+"wilayah/prop_auto",type:"POST",dataType:"JSON",data:e,success:function(e){"true"==e.response&&t(e.message)}})},select:function(e,t){$("#prop_id").val(t.item.id).trigger("change")}})}),$("#nm_kab").live("focus",function(){var e=$("#prop_id").val();$(this).autocomplete({minLength:2,source:function(t,i){$.ajax({url:baseurl+"wilayah/kab_auto",type:"POST",dataType:"JSON",data:{term:t.term,prop_id:e},success:function(e){"true"==e.response&&i(e.message)}})},select:function(e,t){$("#kab_id").val(t.item.id).trigger("change")}})}),$("#nm_kec").live("focus",function(){var e=$("#kab_id").val();$(this).autocomplete({minLength:2,source:function(t,i){$.ajax({url:baseurl+"wilayah/kec_auto",type:"POST",dataType:"JSON",data:{term:t.term,kab_id:e},success:function(e){"true"==e.response&&i(e.message)}})},select:function(e,t){$("#kec_id").val(t.item.id).trigger("change")}})}),$("#nm_kel").live("focus",function(){var e=$("#kec_id").val();$(this).autocomplete({minLength:2,source:function(t,i){$.ajax({url:baseurl+"wilayah/kel_auto",type:"POST",dataType:"JSON",data:{term:t.term,kec_id:e},success:function(e){"true"==e.response&&i(e.message)}})},select:function(e,t){$("#kel_id").val(t.item.id).trigger("change")}})}),$("#prop_id").live("change",function(){$("#nm_kab").length&&$("#nm_kab").focus()}),$("#kab_id").live("change",function(){$("#nm_kec").length&&$("#nm_kec").focus()}),$("#kec_id").live("change",function(){$(this).val();$("#nm_kel").length&&$("#nm_kel").focus()}),$("#kel_id").live("change",function(){var e=$(this).val();$("#rw").length&&$.ajax({url:baseurl+"wilayah/rw_opt",type:"POST",dataType:"JSON",data:{kel_id:e},success:function(e){e?$.each(e,function(e,t){$("#"+e).html(t)}):console.log("error")}})}),$("#rw").live("change",function(){var e=$(this).val();$("#rt").length&&$.ajax({url:baseurl+"wilayah/rt_opt",type:"POST",dataType:"JSON",data:{rw_id:e},success:function(e){e?$("#rt").html(e.rt):console.log("error")}})}),$("#addrw").live("click",function(e){e.preventDefault();var t=$("#kel_id").val(),i=$("#nm_kel").val();if(0==t.length)$("<div/>",{id:"dikonf",html:"<p>Lengkapi data kelurahan</p>"}).appendTo("body"),dikonf();else{var a='<fieldset><legend>Data RW baru</legend><label>Kelurahan</label><input type="text" value="'+i.substr(i.indexOf("-")+1)+'" disabled="disabled" /><br /><label>RW (baru)</label><input type="text" maxlength=3 id="new_rw" style="width:50px"/><br /></fieldset>';$("<div/>",{id:"rwdialog",html:a}).appendTo("body"),$("#rwdialog").dialog({title:"TAMBAH RW BARU",minHeight:100,width:400,modal:!0,close:function(){$(this).find("*").andSelf().remove()},buttons:{SIMPAN:function(){var e=$("#new_rw").val();3!=e.length?($("<div/>",{id:"dikonf",html:"<p>Lengkapi 3 digit data RW.</p>"}).appendTo("body"),dikonf()):$.isNumeric(e)?$.ajax({url:baseurl+"wilayah/rw_add",type:"POST",dataType:"json",data:{kel_id:t,new_rw:e},success:function(e){e?($.each(e,function(e,t){$("#"+e).html(t)}),$("#rwdialog").dialog("close")):($("<div/>",{id:"dikonf",html:"<p>RW sudah dientri.</p>"}).appendTo("body"),dikonf())}}):($("<div/>",{id:"dikonf",html:"<p>3 digit RW berupa numerik/angka.</p>"}).appendTo("body"),dikonf())},BATAL:function(){$(this).dialog("close")}}})}}),$("#addrt").live("click",function(e){e.preventDefault();var t=$("#rw").val(),i=$("#nm_kel").val(),a=$("#rw option:selected").text();if(0==t.length)$("<div/>",{id:"dikonf",html:"<p>Lengkapi data RW.</p>"}).appendTo("body"),dikonf();else{var n='<fieldset><legend style="width:100px">Data RT baru</legend><label for="" style="width:150px;">Kelurahan</label><input type="text" value="'+i.substr(i.indexOf("-")+1)+'" style="width:150px"/><br /><label for="" style="width:150px;">RW</label><input type="text" value="'+a+'" style="width:50px"/><br /><label for="" style="width:150px;">RT (baru)</label><input type="text" maxlength=3 id="new_rt" style="width:50px"/><br /></fieldset>';$("<div/>",{id:"rtdialog",html:n}).appendTo("body"),$("#rtdialog").dialog({title:"TAMBAH RT BARU",minHeight:100,width:400,modal:!0,close:function(){$(this).find("*").andSelf().remove()},buttons:{SIMPAN:function(){var e=$("#new_rt").val();3!=e.length?($("<div/>",{id:"dikonf",html:"<p>Lengkapi 3 digit data RT</p>"}).appendTo("body"),dikonf()):$.isNumeric(e)?$.ajax({url:baseurl+"wilayah/rt_add",type:"POST",dataType:"json",data:{rw_id:t,new_rt:e},success:function(e){e?($.each(e,function(e,t){$("#"+e).html(t)}),$("#rtdialog").dialog("close")):($("<div/>",{id:"dikonf",html:"<p>RT sudah dientri.</p>"}).appendTo("body"),dikonf())}}):($("<div/>",{id:"dikonf",html:"<p>3 digit RT berupa numerik/angka</p>"}).appendTo("body"),dikonf())},BATAL:function(){$(this).dialog("close")}}})}}),$("#editrw").live("click",function(e){e.preventDefault(),$("#droprw").removeAttr("disabled")}),$("#editrt").live("click",function(e){e.preventDefault(),$("#droprt").removeAttr("disabled")})});
